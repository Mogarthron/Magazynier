<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />

  <title>RAPORT JAKOSCIOWY {{model}} {{opis}}</title>
</head>

<body>
  <div class="container-sm">
    <div class="row">
      <div class="col text-start">
        <h1>
          {{model}} {{opis}} - {{ile_zam}}szt
        </h1>
      </div>
      <div class="col">
        <h1>
          nr paczki: 
        </h1>
        <select class="form-select form-select-sm" aria-label=".form-select-sm example">
          <option selected>1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
        </select>
      </div>
    </div>
  </div>
  <div class="container">


    <table class="table table-striped-columns table-hover">
      <thead class="thead-dark" style="position: sticky; top: 0">
        <tr>
          <th>LP</th>
          <th>TYP</th>
          <th>PRZEZ</th>
          <th>OZN</th>
          <th>PROFIL</th>
          <th>NUMER</th>
          <th>WYMIAR</th>
          <th>TOLERANCJA</th>
          <th>ILOSC</th>
          <th>BŁĄD</th>

        </tr>
      </thead>
      <tbody>

        {% for r in tabelka_kj%}

        <tr>
          <td>{{ loop.index }}</td>
          <td>{{r[0]}}</td>
          <td>{{r[1]}}</td>
          <td>{{r[2]}}</td>
          <td>
            {% if r[3] %}
            {{r[3]}}

            {% else %}
            -
            {% endif %}
          </td>
          <td>{{r[4]}}</td>
          <td>{{r[5]}}</td>
          <td>{{r[6]}}</td>
          <td>{{r[7]}}</td>
          <td><button type="button" data-bs-toggle="modal" data-bs-target="#opiszBlad" data-bs-whatever="{{r[4]}}">OPISZ
              BŁĄD</button></td>

        </tr>

        <div class="modal fade" id="opiszBlad" tabindex="-1" aria-labelledby="opiszBladLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="opiszBladLabel">OPIS BŁĘDU PIANKA NR: </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form>


                  <div class="mb-3">
                    <label for="message-text" class="col-form-label"></label>
                    <textarea class="form-control" id="message-text"></textarea>
                  </div>

                  <input class="form-check-input" type="checkbox" value="" id="zapisDoBazyUwag" checked>
                  <label class="form-check-label" for="zapisDoBPazyUwag">
                    Błąd akceptowalny (zapisać do bazy uwag)
                  </label>

                  <button type="submit" class="btn btn-primary">ZAPISZ UWAGĘ</button>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ZAMKNIJ</button>

              </div>
            </div>
          </div>
        </div>
        {% endfor %}


      </tbody>
    </table>
  </div>
  <script>
    var exampleModal = document.getElementById('opiszBlad')
    exampleModal.addEventListener('show.bs.modal', function (event) {
      // Button that triggered the modal
      var button = event.relatedTarget
      // Extract info from data-bs-* attributes
      var nrPianki = button.getAttribute('data-bs-whatever')
      // If necessary, you could initiate an AJAX request here
      // and then do the updating in a callback.
      //
      // Update the modal's content.
      var modalTitle = exampleModal.querySelector('.modal-title')
      var modalBodyInput = exampleModal.querySelector('.modal-body input')

      modalTitle.textContent = 'OPIS BŁĘDU PIANKA NR: ' + nrPianki
      modalBodyInput.value = nrPianki
    })
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
</body>

</html>