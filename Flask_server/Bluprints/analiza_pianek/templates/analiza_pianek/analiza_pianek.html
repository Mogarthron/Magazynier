{% extends "layout_ap.html" %}
{% block content %}
    <div class="container">
      <table class="table table-hover align-middle">
        <thead>
          <tr>   
            <th scope="col">MODEL</th>                                
            <th scope="col">GRUPA</th>                                
            <th scope="col">WSP ZAM %</th>
            <th scope="col">OBJ CIECH</th>
            <th scope="col">OBJ VITA</th>
            <th scope="col">OBJ PIANPOL</th>
            <th scope="col">#</th>
            
          </tr>
        </thead>
        <tbody>
          {% for r in pap.Tabela_podsumowania_analizy.iterrows()%}
          <tr>

            <td>{{ r[1].MODEL }}</td>                                
            <td>{{ r[1].GRUPA }}</td>                                
            <td>{{ r[1].WSPL_DO_ZAM }}%</td>
            <td>{{ r[1].OBJ_CIECH }}</td>
            <td>{{ r[1].OBJ_VITA }}</td>
            <td>{{ r[1].OBJ_PIANPOL }}</td>                               
            <td><a href="{{url_for('analiza_pianek.analiza_modelu', model=r[1].MODEL)}}" class="btn btn-primary">ANALIZA MODELU</a></td>                               
          </tr>                              
          {% endfor %}
        </tbody>
      </table>
               
    </div>
      <script>
        document.addEventListener('DOMContentLoaded', (event) => {
        const tables = document.getElementsByClassName('podsum');
        // console.log(tables)

        for (let table of tables){
          const rows = table.getElementsByTagName('tr');
          for (let row of rows) {
            const cells = row.getElementsByTagName('td');
            
            if (cells.length > 8) {
              const wolne = parseInt(cells[8].textContent);
              const stan_min = parseInt(cells[6].textContent);
              
              if ((stan_min > wolne) && (wolne >= 0)) {
                cells[4].style.backgroundColor = 'yellow';
                //nsole.log(cells[0], stan_min, wolne)
              }
              else if ((wolne < 0)){
                cells[4].style.backgroundColor = 'red';
              }
              else{
                cells[4].style.backgroundColor = 'green';
              }
            } 
            

          }
        }
        
        });
      </script>
 
{% endblock %}